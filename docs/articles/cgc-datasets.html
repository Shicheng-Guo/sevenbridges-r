<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Find Data on CGC via Data Browser and Datasets API • sevenbridges-r</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Find Data on CGC via Data Browser and Datasets API">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-87185344-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-87185344-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sevenbridges-r</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.15.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/api.html">Complete Guide for Seven Bridges API R Client</a>
    </li>
    <li>
      <a href="../articles/apps.html">Describe and Execute CWL Tools/Workflows in R</a>
    </li>
    <li>
      <a href="../articles/bioc-workflow.html">Master Tutorial: Use R for Cancer Genomics Cloud</a>
    </li>
    <li>
      <a href="../articles/cgc-datasets.html">Find Data on CGC via Data Browser and Datasets API</a>
    </li>
    <li>
      <a href="../articles/docker.html">Creating Your Docker Container and Command Line Interface (with docopt)</a>
    </li>
    <li>
      <a href="../articles/rstudio.html">IDE Container: RStudio Server, Shiny Server, and More</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sbg/sevenbridges-r">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Find Data on CGC via Data Browser and Datasets API</h1>
            
            <h4 class="date">2019-10-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sbg/sevenbridges-r/blob/master/vignettes/cgc-datasets.Rmd"><code>vignettes/cgc-datasets.Rmd</code></a></small>
      <div class="hidden name"><code>cgc-datasets.Rmd</code></div>

    </div>

    
    
<div id="introdution" class="section level1">
<h1 class="hasAnchor">
<a href="#introdution" class="anchor"></a>Introdution</h1>
<p>There are currently three ways to find the data you need on CGC:</p>
<ul>
<li>Most easy: use our powerful and pretty GUI called ‘data explorer’ interactively on the platform, please read the tutorial <a href="http://docs.cancergenomicscloud.org/docs/about-the-data-browser">here</a>.</li>
<li>Most advanced: for advanced user, please SPARQL query directly <a href="http://docs.cancergenomicscloud.org/docs/query-via-sparql">tutorial</a>.</li>
<li>Most sweet: use CGC Datasets API, by creating a query list in R (comming soon).</li>
</ul>
</div>
<div id="graphical-data-browser" class="section level1">
<h1 class="hasAnchor">
<a href="#graphical-data-browser" class="anchor"></a>Graphical Data Browser</h1>
<p>Please read the tutorial <a href="http://docs.cancergenomicscloud.org/docs/about-the-data-browser">here</a>.</p>
</div>
<div id="datasets-api" class="section level1">
<h1 class="hasAnchor">
<a href="#datasets-api" class="anchor"></a>Datasets API</h1>
<p>Please read the <a href="http://docs.cancergenomicscloud.org/docs/datasets-api-overview">tutorials</a> first.</p>
<div id="browse-tcga-via-the-datasets-api" class="section level2">
<h2 class="hasAnchor">
<a href="#browse-tcga-via-the-datasets-api" class="anchor"></a>Browse TCGA via the Datasets API</h2>
<p>Doing a HTTP <code>GET</code> on this endpoint one will get a resource with links to all entities in the dataset. Following these links (doing an HTTP <code>GET</code> on them) one will go to a list of entities (for example <code>/files</code>) from TCGA dataset identified with their proper URL. Further following one of these links you’ll get a particular resource (if we went to <code>/files</code>, we’ll get a description of a particular file) with all specific properties like id, label, etc. and links to other entities that are connected to a specific resource (for example <code>/cases</code>) that you can explore further. From there on, the process repeats as long as you follow the links.</p>
<div id="return-datasets-accessible-trough-the-cgc" class="section level3">
<h3 class="hasAnchor">
<a href="#return-datasets-accessible-trough-the-cgc" class="anchor"></a>Return datasets accessible trough the CGC</h3>
<p>Create an Auth object with your token, make sure you are using the correct URL.</p>
<ul>
<li><code>https://cgc-datasets-api.sbgenomics.com/</code></li>
</ul>
<p>use <code>Auth$api()</code> method so there is no need to type base URL or token again.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"sevenbridges"</span>)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co"># create an Auth object</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>a &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Auth-class.html">Auth</a></span>(</span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="dt">url =</span> <span class="st">"https://cgc-datasets-api.sbgenomics.com/"</span>,</span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="dt">token =</span> <span class="st">"your_cgc_token"</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>)</span>
<span id="cb1-7"><a href="#cb1-7"></a>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"datasets"</span>)</span></code></pre></div>
</div>
<div id="return-list-of-all-tcga-entities" class="section level3">
<h3 class="hasAnchor">
<a href="#return-list-of-all-tcga-entities" class="anchor"></a>Return list of all TCGA entities</h3>
<p>You can issue another <code>GET</code> request to the href of the tcga object, if you want to access TCGA data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>a &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Auth-class.html">Auth</a></span>(</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="dt">url =</span> <span class="st">"https://cgc-datasets-api.sbgenomics.com/datasets/tcga/v0"</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="dt">token =</span> <span class="st">"your_cgc_token"</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>)</span>
<span id="cb2-5"><a href="#cb2-5"></a>(res &lt;-<span class="st"> </span>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>()) <span class="co"># default method is GET</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co"># list all resources/entities</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(res<span class="op">$</span><span class="st">"_links"</span>)</span></code></pre></div>
</div>
<div id="interpreting-the-list-of-all-entities" class="section level3">
<h3 class="hasAnchor">
<a href="#interpreting-the-list-of-all-entities" class="anchor"></a>Interpreting the list of all entities</h3>
<p>For example, to see a list of all TCGA files, send the request:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>(res &lt;-<span class="st"> </span>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"files"</span>))</span></code></pre></div>
<p>For example, to see the <strong>metadata schema</strong> for files send the request:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"files/schema"</span>)</span></code></pre></div>
</div>
<div id="copy-files-to-you-project" class="section level3">
<h3 class="hasAnchor">
<a href="#copy-files-to-you-project" class="anchor"></a>Copy files to you project</h3>
<p>Get file id from Datasets API, then use public API to copy files. Make sure your project is “TCGA” compatible, otherwise if you are trying to copy controlled access data to your non-TCGA project, you will get</p>
<pre><code>"HTTP Status 403: Insufficient privileges to access the requested file."</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>(res &lt;-<span class="st"> </span>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"files"</span>))</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a>get_id &lt;-<span class="st"> </span><span class="cf">function</span>(obj) <span class="kw"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(obj<span class="op">$</span><span class="st">"_embedded"</span><span class="op">$</span>files, <span class="cf">function</span>(x) x<span class="op">$</span>id)</span>
<span id="cb6-4"><a href="#cb6-4"></a>ids &lt;-<span class="st"> </span><span class="kw">get_id</span>(res)</span>
<span id="cb6-5"><a href="#cb6-5"></a></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co"># create CGC auth</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>a_cgc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Auth-class.html">Auth</a></span>(<span class="dt">platform =</span> <span class="st">"cgc"</span>, <span class="dt">token =</span> a<span class="op">$</span>token)</span>
<span id="cb6-8"><a href="#cb6-8"></a>a_cgc<span class="op">$</span><span class="kw">copyFile</span>(<span class="dt">id =</span> ids, <span class="dt">project =</span> <span class="st">"RFranklin/tcga-demo"</span>)</span></code></pre></div>
</div>
</div>
<div id="post-with-query" class="section level2">
<h2 class="hasAnchor">
<a href="#post-with-query" class="anchor"></a>Post with query</h2>
<p>endpoint user can filter collection resources by using a DSL in JSON format that translates as a subset of SPARQL. Main advantage here is that an end user gets the subset SPARQL expressiveness without the need to learn SPARQL specification.</p>
<div id="find-samples-connected-to-a-case" class="section level3">
<h3 class="hasAnchor">
<a href="#find-samples-connected-to-a-case" class="anchor"></a>Find samples connected to a case</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>body &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="dt">entity =</span> <span class="st">"samples"</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="dt">hasCase =</span> <span class="st">"0004D251-3F70-4395-B175-C94C2F5B1B81"</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>)</span>
<span id="cb7-5"><a href="#cb7-5"></a>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"query"</span>, <span class="dt">body =</span> body, <span class="dt">method =</span> <span class="st">"POST"</span>)</span></code></pre></div>
<p>Count samples connected to a case</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"query/total"</span>, <span class="dt">body =</span> body, <span class="dt">method =</span> <span class="st">"POST"</span>)</span></code></pre></div>
<p>Issuing a <code>GET</code> request to the href path will return the following data:</p>
<p>Note: <code>api</code> function is a light layer of httr package, it’s different from <code>Auth$api</code> call.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>httr<span class="op">::</span><span class="kw"><a href="https://httr.r-lib.org/reference/content.html">content</a></span>(</span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="kw"><a href="../reference/api.html">api</a></span>(</span>
<span id="cb9-3"><a href="#cb9-3"></a>    <span class="dt">token =</span> a<span class="op">$</span>token,</span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="dt">base_url =</span> <span class="st">"https://cgc-datasets-api.sbgenomics.com/datasets/tcga/v0/samples/9259E9EE-7279-4B62-8512-509CB705029C"</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>  )</span>
<span id="cb9-6"><a href="#cb9-6"></a>)</span></code></pre></div>
</div>
<div id="find-cases-with-given-age-at-diagnosis" class="section level3">
<h3 class="hasAnchor">
<a href="#find-cases-with-given-age-at-diagnosis" class="anchor"></a>Find cases with given age at diagnosis</h3>
<p>Suppose you want to see all cases for which the age at diagnosis is between 10 and 50. Then, you use the following query.</p>
<p>Note that the value of the metadata field hasAgeAtDiagnosis is a dictionary containing the keyfilter, whose value is a further dictionary with keysgt(greater than) and lt (less than) for the upper and lower bounds to filter by.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>body &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="st">"entity"</span> =<span class="st"> "cases"</span>,</span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="st">"hasAgeAtDiagnosis"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb10-4"><a href="#cb10-4"></a>    <span class="st">"filter"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb10-5"><a href="#cb10-5"></a>      <span class="st">"gt"</span> =<span class="st"> </span><span class="dv">10</span>,</span>
<span id="cb10-6"><a href="#cb10-6"></a>      <span class="st">"lt"</span> =<span class="st"> </span><span class="dv">50</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>    )</span>
<span id="cb10-8"><a href="#cb10-8"></a>  )</span>
<span id="cb10-9"><a href="#cb10-9"></a>)</span>
<span id="cb10-10"><a href="#cb10-10"></a>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"query"</span>, <span class="dt">body =</span> body, <span class="dt">method =</span> <span class="st">"POST"</span>)</span></code></pre></div>
</div>
<div id="find-cases-with-a-given-age-at-diagnosis-and-disease" class="section level3">
<h3 class="hasAnchor">
<a href="#find-cases-with-a-given-age-at-diagnosis-and-disease" class="anchor"></a>Find cases with a given age at diagnosis and disease</h3>
<p>Suppose you want to see all cases that, as in the example, (<a href="#find-cases-with-given-age-at-diagnosis">Find cases with given age at diagnosis</a>)(doc:find-all-cases-with-a-given-age-at-diagnosis), have an age at diagnosis of between 10 and 50, but that also have the disease “Kidney Chromophobe”. Then, use the following query:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>body &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="st">"entity"</span> =<span class="st"> "cases"</span>,</span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="st">"hasAgeAtDiagnosis"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb11-4"><a href="#cb11-4"></a>    <span class="st">"filter"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb11-5"><a href="#cb11-5"></a>      <span class="st">"gt"</span> =<span class="st"> </span><span class="dv">10</span>,</span>
<span id="cb11-6"><a href="#cb11-6"></a>      <span class="st">"lt"</span> =<span class="st"> </span><span class="dv">50</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>    )</span>
<span id="cb11-8"><a href="#cb11-8"></a>  ),</span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="st">"hasDiseaseType"</span> =<span class="st"> "Kidney Chromophobe"</span></span>
<span id="cb11-10"><a href="#cb11-10"></a>)</span>
<span id="cb11-11"><a href="#cb11-11"></a>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"query"</span>, <span class="dt">body =</span> body, <span class="dt">method =</span> <span class="st">"POST"</span>)</span></code></pre></div>
</div>
<div id="complex-example-for-filtering-tcga-data" class="section level3">
<h3 class="hasAnchor">
<a href="#complex-example-for-filtering-tcga-data" class="anchor"></a>Complex example for filtering TCGA data</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>body &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="st">"entity"</span> =<span class="st"> "cases"</span>,</span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="st">"hasSample"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb12-4"><a href="#cb12-4"></a>    <span class="st">"hasSampleType"</span> =<span class="st"> "Primary Tumor"</span>,</span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="st">"hasPortion"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb12-6"><a href="#cb12-6"></a>      <span class="st">"hasPortionNumber"</span> =<span class="st"> </span><span class="dv">11</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>    )</span>
<span id="cb12-8"><a href="#cb12-8"></a>  ),</span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="st">"hasNewTumorEvent"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb12-10"><a href="#cb12-10"></a>    <span class="st">"hasNewTumorAnatomicSite"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Liver"</span>, <span class="st">"Pancreas"</span>),</span>
<span id="cb12-11"><a href="#cb12-11"></a>    <span class="st">"hasNewTumorEventType"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb12-12"><a href="#cb12-12"></a>      <span class="st">"filter"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb12-13"><a href="#cb12-13"></a>        <span class="st">"contains"</span> =<span class="st"> "Recurrence"</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>      )</span>
<span id="cb12-15"><a href="#cb12-15"></a>    )</span>
<span id="cb12-16"><a href="#cb12-16"></a>  )</span>
<span id="cb12-17"><a href="#cb12-17"></a>)</span>
<span id="cb12-18"><a href="#cb12-18"></a>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"query"</span>, <span class="dt">body =</span> body, <span class="dt">method =</span> <span class="st">"POST"</span>)</span></code></pre></div>
<p>Issuing a <code>GET</code> request to the href path</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>httr<span class="op">::</span><span class="kw"><a href="https://httr.r-lib.org/reference/content.html">content</a></span>(</span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="kw"><a href="../reference/api.html">api</a></span>(</span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="dt">token =</span> a<span class="op">$</span>token,</span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="dt">base_url =</span> <span class="st">"https://cgc-datasets-api.sbgenomics.com/datasets/tcga/v0/cases/0004D251-3F70-4395-B175-C94C2F5B1B81"</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>  )</span>
<span id="cb13-6"><a href="#cb13-6"></a>)</span></code></pre></div>
</div>
<div id="query-with-multiple-filters-on-a-case" class="section level3">
<h3 class="hasAnchor">
<a href="#query-with-multiple-filters-on-a-case" class="anchor"></a>Query with multiple filters on a case</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>get_id &lt;-<span class="st"> </span><span class="cf">function</span>(obj) <span class="kw"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(obj<span class="op">$</span><span class="st">"_embedded"</span><span class="op">$</span>files, <span class="cf">function</span>(x) x<span class="op">$</span>id)</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(res)</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a>body &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="st">"entity"</span> =<span class="st"> "cases"</span>,</span>
<span id="cb14-6"><a href="#cb14-6"></a>  <span class="st">"hasSample"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb14-7"><a href="#cb14-7"></a>    <span class="st">"hasSampleType"</span> =<span class="st"> "Primary Tumor"</span>,</span>
<span id="cb14-8"><a href="#cb14-8"></a>    <span class="st">"hasPortion"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb14-9"><a href="#cb14-9"></a>      <span class="st">"hasPortionNumber"</span> =<span class="st"> </span><span class="dv">11</span>,</span>
<span id="cb14-10"><a href="#cb14-10"></a>      <span class="st">"hasID"</span> =<span class="st"> "TCGA-DD-AAVP-01A-11"</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>    )</span>
<span id="cb14-12"><a href="#cb14-12"></a>  ),</span>
<span id="cb14-13"><a href="#cb14-13"></a>  <span class="st">"hasNewTumorEvent"</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb14-14"><a href="#cb14-14"></a>    <span class="st">"hasNewTumorAnatomicSite"</span> =<span class="st"> "Liver"</span>,</span>
<span id="cb14-15"><a href="#cb14-15"></a>    <span class="st">"hasNewTumorEventType"</span> =<span class="st"> "Intrahepatic Recurrence"</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>  )</span>
<span id="cb14-17"><a href="#cb14-17"></a>)</span>
<span id="cb14-18"><a href="#cb14-18"></a></span>
<span id="cb14-19"><a href="#cb14-19"></a>(res &lt;-<span class="st"> </span>a<span class="op">$</span><span class="kw"><a href="../reference/api.html">api</a></span>(<span class="dt">path =</span> <span class="st">"files"</span>, <span class="dt">body =</span> body))</span>
<span id="cb14-20"><a href="#cb14-20"></a><span class="kw">get_id</span>(res)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introdution">Introdution</a></li>
      <li><a href="#graphical-data-browser">Graphical Data Browser</a></li>
      <li>
<a href="#datasets-api">Datasets API</a><ul class="nav nav-pills nav-stacked">
<li><a href="#browse-tcga-via-the-datasets-api">Browse TCGA via the Datasets API</a></li>
      <li><a href="#post-with-query">Post with query</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nan Xiao, Tengfei Yin, Seven Bridges Genomics.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
